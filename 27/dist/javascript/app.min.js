window.onload=function(){const n=new WebSocket("wss://fep-app.herokuapp.com/"),e=document.querySelector("#status"),o=document.querySelector("#history");n.onopen=function(){e.innerHTML="cоединение установлено<br>",e.style.color="green"},n.onclose=function(n){n.wasClean?e.innerHTML="cоединение закрыто":e.innerHTML="соединения как-то закрыто",e.innerHTML+=`<br>код: ${n.code?n.code:"не указан"}, причина: ${n.reason?n.reason:"не указана"}`,e.style.color="red"},n.onmessage=function(n){const e=JSON.parse(n.data);o.innerHTML+=`<div class='w-100 mb-10'><b>${e.name}</b>: ${e.msg.split("\n").join("<br>")}</div>`},n.onerror=function(n){e.innerHTML="ошибка "+n.message,e.style.color="red"},document.forms["message-send"].onsubmit=function(){const e={name:this.fname.value,msg:this.msg.value};return n.send(JSON.stringify(e)),this.msg.value="",!1}};